<html>
    <body>
        <script src="../js/bundle.js"></script>
        <script
            src="https://code.jquery.com/jquery-3.3.1.min.js"
            integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
            crossorigin="anonymous"></script>
        <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">
        <link href="../css/prism.css" rel="stylesheet">
        <script src="../js/prism.js"></script>
        <link href="../css/notebook.css" rel="stylesheet">

        <script>
            var print = SDRKit.notebook.print
            var printSDR = SDRKit.visual.printSDR
        </script>

        <!-- NOTEBOOK -->

        <h2>SDRKit</h2>
        <h4>Finite State Machine</h4>

        <p>
            From the example used on <a href="https://en.wikipedia.org/wiki/Finite-state_machine" target="_blank">Wikipedia</a>
            <br/>
            <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/9/9e/Turnstile_state_machine_colored.svg/790px-Turnstile_state_machine_colored.svg.png" style="max-width:400px;">
        </p>
        <script nb="1">
            var SDR = SDRKit.SDR
            var dict = new SDRKit.SDRDictionary()
            // states
            var lockedState = new SDR({range:128})
            printSDR({sdr:lockedState,title:'lockedState'})
            dict.set(lockedState.indices,'lockedState')
            var unlockedState = new SDR({range:128})
            printSDR({sdr:unlockedState,title:'unlockedState'})
            dict.set(unlockedState.indices,'unlockedState')
        </script>
        <script nb="2">
            // transitions
            var pushTrans = new SDR({range:128})
            var coinTrans = new SDR({range:128})
            printSDR({sdr:pushTrans,title:'pushTrans'})
            printSDR({sdr:coinTrans,title:'coinTrans'})
        </script>
        <script nb="3">
            // mapping
            var map = new SDRKit.SDRMap()

            map.set( // locked state and coin transition map to unlocked state
                SDR.Subsample(lockedState.union(coinTrans.indices),8),
                unlockedState.indices
            )

            map.set( // locked state and push transition map to locked state
                SDR.Subsample(lockedState.union(pushTrans.indices),8),
                lockedState.indices
            )

            map.set( // unlocked state and push transition map to locked state
                SDR.Subsample(unlockedState.union(pushTrans.indices),8),
                lockedState.indices
            )

            map.set( // unlocked state and coin transition map to unlocked state
                SDR.Subsample(unlockedState.union(coinTrans.indices),8),
                unlockedState.indices
            )
        </script>
        <script nb="4">
            // running
            var state = map.get(SDR.Subsample(lockedState.union(coinTrans.indices),8))
            printSDR({indices: state,range: 128,title:dict.get(state)})
            state = map.get(SDR.Subsample(pushTrans.union(state),8))
            printSDR({indices: state,range: 128,title:dict.get(state)})
        </script>

        <!-- SETUP -->

        <script>
            SDRKit.notebook.render()
        </script>
    </body>
</html>